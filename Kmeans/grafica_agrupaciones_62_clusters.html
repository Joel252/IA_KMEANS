
<!DOCTYPE html>
<meta charset="utf-8" />

<!-- Cargar libreria d3.js -->
<script src="https://d3js.org/d3.v6.js"></script>

<!-- Crear div donde se mostrar� la gr�fica -->
<div id="my_dataviz"></div>

<script> 
// set the dimensions and margins of the graph
  const margin = { top: 0, right: 30, bottom: 150, left: 60 },
    width = 1800 - margin.left - margin.right,
    height = 1000 - margin.top - margin.bottom;

  // append the svg object to the body of the page
  const svg = d3
    .select("#my_dataviz")
    .append("svg")
    .attr("viewBox", [0, 0, width + 90, height + 80])
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

  // Read dummy data
  let data = {"nodes": [{"order": "Actinobacteria", "name": "Bifidobacteriales", "group": 0}, {"order": "Actinobacteria", "name": "Micrococcales", "group": 1}, {"order": "Actinobacteria", "name": "Streptomycetales", "group": 2}, {"order": "Actinobacteria", "name": "Micromonosporales", "group": 3}, {"order": "Actinobacteria", "name": "Pseudonocardiales", "group": 4}, {"order": "Actinobacteria", "name": "Propionibacteriales", "group": 5}, {"order": "Actinobacteria", "name": "Actinomycetales", "group": 6}, {"order": "Aeromonadales", "name": "Aeromonadaceae", "group": 7}, {"order": "Alteromonadales", "name": "Pseudoalteromonadaceae", "group": 8}, {"order": "Alteromonadales", "name": "Alteromonadaceae", "group": 9}, {"order": "Alteromonadales", "name": "Shewanellaceae", "group": 10}, {"order": "Aquificales", "name": "Aquificaceae", "group": 11}, {"order": "Bacteroidetes", "name": "Flavobacteriia", "group": 12}, {"order": "Bacteroidetes", "name": "Bacteroidia", "group": 13}, {"order": "Bacteroidetes", "name": "Cytophagia", "group": 14}, {"order": "Bacteroidetes", "name": "Sphingobacteriia", "group": 15}, {"order": "Burkholderiales", "name": "Comamonadaceae", "group": 16}, {"order": "Burkholderiales", "name": "unclassified Burkholderiales", "group": 17}, {"order": "Burkholderiales", "name": "Oxalobacteraceae", "group": 18}, {"order": "Caulobacterales", "name": "Caulobacteraceae", "group": 19}, {"order": "Chlamydiia", "name": "Chlamydiales", "group": 20}, {"order": "Chlorobi", "name": "Chlorobia", "group": 21}, {"order": "Chromatiales", "name": "Ectothiorhodospiraceae", "group": 22}, {"order": "Clostridia", "name": "Clostridiales", "group": 23}, {"order": "Clostridia", "name": "Thermoanaerobacterales", "group": 24}, {"order": "Cyanobacteria", "name": "Oscillatoriophycideae", "group": 25}, {"order": "Cyanobacteria", "name": "Synechococcales", "group": 26}, {"order": "Cyanobacteria", "name": "Nostocales", "group": 27}, {"order": "Dehalococcoidia", "name": "Dehalococcoidales", "group": 28}, {"order": "Deinococci", "name": "Thermales", "group": 29}, {"order": "Deinococci", "name": "Deinococcales", "group": 30}, {"order": "Deltaproteobacteria", "name": "Desulfovibrionales", "group": 31}, {"order": "Deltaproteobacteria", "name": "Desulfuromonadales", "group": 32}, {"order": "Deltaproteobacteria", "name": "Myxococcales", "group": 33}, {"order": "Deltaproteobacteria", "name": "Desulfobacterales", "group": 34}, {"order": "Enterobacterales", "name": "Yersiniaceae", "group": 35}, {"order": "Enterobacterales", "name": "Hafniaceae", "group": 36}, {"order": "Enterobacterales", "name": "Erwiniaceae", "group": 37}, {"order": "Enterobacterales", "name": "Pectobacteriaceae", "group": 38}, {"order": "Enterobacterales", "name": "Morganellaceae", "group": 39}, {"order": "Fusobacteriales", "name": "Fusobacteriaceae", "group": 40}, {"order": "Legionellales", "name": "Legionellaceae", "group": 41}, {"order": "Leptospirales", "name": "Leptospiraceae", "group": 42}, {"order": "Mollicutes", "name": "Mycoplasmatales", "group": 43}, {"order": "Mollicutes", "name": "Entomoplasmatales", "group": 44}, {"order": "Mollicutes", "name": "Acholeplasmatales", "group": 45}, {"order": "Neisseriales", "name": "Neisseriaceae", "group": 46}, {"order": "Oceanospirillales", "name": "Halomonadaceae", "group": 47}, {"order": "Pasteurellales", "name": "Pasteurellaceae", "group": 48}, {"order": "Planctomycetia", "name": "Planctomycetales", "group": 49}, {"order": "Pseudomonadales", "name": "Moraxellaceae", "group": 50}, {"order": "Rhizobiales", "name": "Rhizobiaceae", "group": 51}, {"order": "Rhizobiales", "name": "Bradyrhizobiaceae", "group": 52}, {"order": "Rhizobiales", "name": "Brucellaceae", "group": 53}, {"order": "Rhizobiales", "name": "Hyphomicrobiaceae", "group": 54}, {"order": "Rhizobiales", "name": "Phyllobacteriaceae", "group": 55}, {"order": "Rhizobiales", "name": "Methylobacteriaceae", "group": 56}, {"order": "Rhizobiales", "name": "Bartonellaceae", "group": 57}, {"order": "Rhodobacterales", "name": "Rhodobacteraceae", "group": 58}, {"order": "Rhodospirillales", "name": "Acetobacteraceae", "group": 59}, {"order": "Rhodospirillales", "name": "Rhodospirillaceae", "group": 60}, {"order": "Rickettsiales", "name": "Anaplasmataceae", "group": 61}, {"order": "Rickettsiales", "name": "Rickettsiaceae", "group": 62}, {"order": "Sphingomonadales", "name": "Sphingomonadaceae", "group": 63}, {"order": "Sphingomonadales", "name": "Erythrobacteraceae", "group": 64}, {"order": "Spirochaetales", "name": "Spirochaetaceae", "group": 65}, {"order": "Spirochaetales", "name": "Borreliaceae", "group": 66}, {"order": "Thermotogales", "name": "Thermotogaceae", "group": 67}, {"order": "Thiotrichales", "name": "Piscirickettsiaceae", "group": 68}, {"order": "Thiotrichales", "name": "Francisellaceae", "group": 69}, {"order": "Vibrionales", "name": "Vibrionaceae", "group": 70}, {"order": "Actinobacteria", "name": "Xanthomonadaceae", "group": 71}, {"name": "clusters_1", "group": 72}, {"name": "clusters_2", "group": 73}, {"name": "clusters_3", "group": 74}, {"name": "clusters_4", "group": 75}, {"name": "clusters_5", "group": 76}, {"name": "clusters_6", "group": 77}, {"name": "clusters_7", "group": 78}, {"name": "clusters_8", "group": 79}, {"name": "clusters_9", "group": 80}, {"name": "clusters_10", "group": 81}, {"name": "clusters_11", "group": 82}, {"name": "clusters_12", "group": 83}, {"name": "clusters_13", "group": 84}, {"name": "clusters_14", "group": 85}, {"name": "clusters_15", "group": 86}, {"name": "clusters_16", "group": 87}, {"name": "clusters_17", "group": 88}, {"name": "clusters_18", "group": 89}, {"name": "clusters_19", "group": 90}, {"name": "clusters_20", "group": 91}, {"name": "clusters_21", "group": 92}, {"name": "clusters_22", "group": 93}, {"name": "clusters_23", "group": 94}, {"name": "clusters_24", "group": 95}, {"name": "clusters_25", "group": 96}, {"name": "clusters_26", "group": 97}, {"name": "clusters_27", "group": 98}, {"name": "clusters_28", "group": 99}, {"name": "clusters_29", "group": 100}, {"name": "clusters_30", "group": 101}, {"name": "clusters_31", "group": 102}, {"name": "clusters_32", "group": 103}, {"name": "clusters_33", "group": 104}, {"name": "clusters_34", "group": 105}, {"name": "clusters_35", "group": 106}, {"name": "clusters_36", "group": 107}, {"name": "clusters_37", "group": 108}, {"name": "clusters_38", "group": 109}, {"name": "clusters_39", "group": 110}, {"name": "clusters_40", "group": 111}, {"name": "clusters_41", "group": 112}, {"name": "clusters_42", "group": 113}, {"name": "clusters_43", "group": 114}, {"name": "clusters_44", "group": 115}, {"name": "clusters_45", "group": 116}, {"name": "clusters_46", "group": 117}, {"name": "clusters_47", "group": 118}, {"name": "clusters_48", "group": 119}, {"name": "clusters_49", "group": 120}, {"name": "clusters_50", "group": 121}, {"name": "clusters_51", "group": 122}, {"name": "clusters_52", "group": 123}, {"name": "clusters_53", "group": 124}, {"name": "clusters_54", "group": 125}, {"name": "clusters_55", "group": 126}, {"name": "clusters_56", "group": 127}, {"name": "clusters_57", "group": 128}, {"name": "clusters_58", "group": 129}, {"name": "clusters_59", "group": 130}, {"name": "clusters_60", "group": 131}, {"name": "clusters_61", "group": 132}, {"name": "clusters_62", "group": 133}], "links": [{"source": 0, "target": 114, "value": 6}, {"source": 0, "target": 113, "value": 1}, {"source": 0, "target": 86, "value": 1}, {"source": 0, "target": 116, "value": 19}, {"source": 0, "target": 89, "value": 3}, {"source": 0, "target": 72, "value": 5}, {"source": 0, "target": 125, "value": 3}, {"source": 0, "target": 117, "value": 1}, {"source": 0, "target": 85, "value": 1}, {"source": 0, "target": 93, "value": 4}, {"source": 0, "target": 132, "value": 19}, {"source": 0, "target": 111, "value": 2}, {"source": 0, "target": 109, "value": 2}, {"source": 0, "target": 123, "value": 1}, {"source": 0, "target": 105, "value": 1}, {"source": 0, "target": 75, "value": 6}, {"source": 0, "target": 122, "value": 1}, {"source": 1, "target": 117, "value": 7}, {"source": 1, "target": 122, "value": 3}, {"source": 1, "target": 72, "value": 3}, {"source": 1, "target": 90, "value": 9}, {"source": 1, "target": 114, "value": 1}, {"source": 1, "target": 86, "value": 2}, {"source": 1, "target": 115, "value": 35}, {"source": 1, "target": 133, "value": 3}, {"source": 1, "target": 119, "value": 1}, {"source": 1, "target": 82, "value": 13}, {"source": 1, "target": 132, "value": 13}, {"source": 1, "target": 75, "value": 2}, {"source": 2, "target": 109, "value": 1}, {"source": 2, "target": 132, "value": 5}, {"source": 2, "target": 73, "value": 9}, {"source": 2, "target": 82, "value": 8}, {"source": 2, "target": 75, "value": 2}, {"source": 2, "target": 99, "value": 12}, {"source": 2, "target": 115, "value": 1}, {"source": 2, "target": 90, "value": 18}, {"source": 2, "target": 119, "value": 1}, {"source": 2, "target": 96, "value": 5}, {"source": 2, "target": 114, "value": 2}, {"source": 2, "target": 86, "value": 1}, {"source": 2, "target": 72, "value": 2}, {"source": 2, "target": 125, "value": 1}, {"source": 2, "target": 102, "value": 1}, {"source": 2, "target": 123, "value": 10}, {"source": 3, "target": 99, "value": 1}, {"source": 3, "target": 90, "value": 2}, {"source": 3, "target": 109, "value": 6}, {"source": 3, "target": 132, "value": 1}, {"source": 4, "target": 90, "value": 1}, {"source": 4, "target": 109, "value": 4}, {"source": 4, "target": 132, "value": 7}, {"source": 4, "target": 113, "value": 6}, {"source": 4, "target": 124, "value": 4}, {"source": 4, "target": 82, "value": 4}, {"source": 5, "target": 124, "value": 2}, {"source": 5, "target": 82, "value": 4}, {"source": 5, "target": 117, "value": 18}, {"source": 5, "target": 113, "value": 4}, {"source": 5, "target": 86, "value": 11}, {"source": 6, "target": 124, "value": 1}, {"source": 6, "target": 113, "value": 4}, {"source": 6, "target": 117, "value": 1}, {"source": 6, "target": 86, "value": 5}, {"source": 6, "target": 89, "value": 1}, {"source": 6, "target": 82, "value": 1}, {"source": 7, "target": 75, "value": 1}, {"source": 7, "target": 113, "value": 1}, {"source": 7, "target": 117, "value": 10}, {"source": 7, "target": 82, "value": 1}, {"source": 7, "target": 123, "value": 17}, {"source": 8, "target": 123, "value": 3}, {"source": 8, "target": 73, "value": 10}, {"source": 8, "target": 128, "value": 1}, {"source": 9, "target": 117, "value": 1}, {"source": 9, "target": 85, "value": 1}, {"source": 9, "target": 116, "value": 15}, {"source": 9, "target": 89, "value": 3}, {"source": 9, "target": 128, "value": 1}, {"source": 9, "target": 74, "value": 2}, {"source": 9, "target": 108, "value": 7}, {"source": 9, "target": 77, "value": 4}, {"source": 9, "target": 72, "value": 14}, {"source": 10, "target": 108, "value": 1}, {"source": 10, "target": 77, "value": 19}, {"source": 10, "target": 72, "value": 9}, {"source": 11, "target": 77, "value": 9}, {"source": 11, "target": 133, "value": 1}, {"source": 12, "target": 108, "value": 1}, {"source": 12, "target": 133, "value": 15}, {"source": 12, "target": 77, "value": 60}, {"source": 12, "target": 116, "value": 27}, {"source": 12, "target": 85, "value": 3}, {"source": 12, "target": 105, "value": 5}, {"source": 12, "target": 72, "value": 2}, {"source": 12, "target": 89, "value": 4}, {"source": 12, "target": 117, "value": 18}, {"source": 12, "target": 82, "value": 2}, {"source": 12, "target": 78, "value": 1}, {"source": 12, "target": 112, "value": 1}, {"source": 13, "target": 78, "value": 1}, {"source": 13, "target": 82, "value": 3}, {"source": 13, "target": 112, "value": 11}, {"source": 13, "target": 86, "value": 2}, {"source": 13, "target": 90, "value": 6}, {"source": 13, "target": 75, "value": 5}, {"source": 13, "target": 114, "value": 1}, {"source": 13, "target": 96, "value": 4}, {"source": 13, "target": 125, "value": 4}, {"source": 13, "target": 118, "value": 4}, {"source": 13, "target": 92, "value": 2}, {"source": 13, "target": 95, "value": 2}, {"source": 13, "target": 89, "value": 1}, {"source": 13, "target": 119, "value": 3}, {"source": 13, "target": 109, "value": 1}, {"source": 13, "target": 102, "value": 2}, {"source": 13, "target": 83, "value": 4}, {"source": 13, "target": 73, "value": 1}, {"source": 13, "target": 113, "value": 2}, {"source": 14, "target": 109, "value": 1}, {"source": 14, "target": 96, "value": 1}, {"source": 14, "target": 119, "value": 3}, {"source": 14, "target": 83, "value": 1}, {"source": 14, "target": 90, "value": 4}, {"source": 14, "target": 95, "value": 3}, {"source": 14, "target": 75, "value": 7}, {"source": 14, "target": 99, "value": 3}, {"source": 14, "target": 132, "value": 1}, {"source": 14, "target": 86, "value": 1}, {"source": 14, "target": 92, "value": 2}, {"source": 14, "target": 115, "value": 1}, {"source": 14, "target": 105, "value": 1}, {"source": 14, "target": 73, "value": 4}, {"source": 14, "target": 118, "value": 1}, {"source": 14, "target": 125, "value": 1}, {"source": 15, "target": 125, "value": 2}, {"source": 15, "target": 90, "value": 2}, {"source": 15, "target": 119, "value": 2}, {"source": 15, "target": 109, "value": 1}, {"source": 15, "target": 99, "value": 1}, {"source": 15, "target": 102, "value": 2}, {"source": 15, "target": 115, "value": 2}, {"source": 16, "target": 83, "value": 4}, {"source": 16, "target": 99, "value": 6}, {"source": 16, "target": 119, "value": 1}, {"source": 16, "target": 123, "value": 20}, {"source": 16, "target": 114, "value": 1}, {"source": 16, "target": 133, "value": 1}, {"source": 16, "target": 90, "value": 1}, {"source": 16, "target": 95, "value": 2}, {"source": 16, "target": 109, "value": 1}, {"source": 16, "target": 92, "value": 2}, {"source": 16, "target": 118, "value": 1}, {"source": 16, "target": 96, "value": 4}, {"source": 16, "target": 102, "value": 1}, {"source": 17, "target": 82, "value": 1}, {"source": 17, "target": 118, "value": 1}, {"source": 17, "target": 95, "value": 1}, {"source": 17, "target": 86, "value": 5}, {"source": 17, "target": 96, "value": 1}, {"source": 17, "target": 92, "value": 2}, {"source": 17, "target": 119, "value": 1}, {"source": 18, "target": 92, "value": 1}, {"source": 18, "target": 95, "value": 3}, {"source": 18, "target": 72, "value": 4}, {"source": 18, "target": 99, "value": 8}, {"source": 18, "target": 125, "value": 2}, {"source": 18, "target": 119, "value": 1}, {"source": 18, "target": 109, "value": 3}, {"source": 18, "target": 102, "value": 1}, {"source": 18, "target": 118, "value": 1}, {"source": 18, "target": 83, "value": 1}, {"source": 19, "target": 95, "value": 1}, {"source": 19, "target": 118, "value": 1}, {"source": 19, "target": 73, "value": 11}, {"source": 19, "target": 90, "value": 1}, {"source": 20, "target": 92, "value": 8}, {"source": 20, "target": 114, "value": 1}, {"source": 20, "target": 73, "value": 9}, {"source": 20, "target": 118, "value": 1}, {"source": 20, "target": 72, "value": 7}, {"source": 20, "target": 122, "value": 2}, {"source": 20, "target": 85, "value": 6}, {"source": 20, "target": 120, "value": 1}, {"source": 20, "target": 128, "value": 2}, {"source": 20, "target": 86, "value": 1}, {"source": 20, "target": 89, "value": 5}, {"source": 20, "target": 117, "value": 3}, {"source": 20, "target": 116, "value": 3}, {"source": 20, "target": 119, "value": 4}, {"source": 20, "target": 132, "value": 1}, {"source": 20, "target": 106, "value": 2}, {"source": 20, "target": 96, "value": 15}, {"source": 20, "target": 109, "value": 4}, {"source": 20, "target": 102, "value": 1}, {"source": 20, "target": 99, "value": 5}, {"source": 20, "target": 130, "value": 1}, {"source": 20, "target": 95, "value": 1}, {"source": 20, "target": 82, "value": 7}, {"source": 20, "target": 133, "value": 13}, {"source": 20, "target": 90, "value": 9}, {"source": 20, "target": 110, "value": 3}, {"source": 20, "target": 75, "value": 1}, {"source": 20, "target": 105, "value": 5}, {"source": 21, "target": 89, "value": 4}, {"source": 21, "target": 113, "value": 1}, {"source": 21, "target": 133, "value": 1}, {"source": 21, "target": 96, "value": 2}, {"source": 21, "target": 106, "value": 1}, {"source": 21, "target": 90, "value": 1}, {"source": 21, "target": 72, "value": 1}, {"source": 21, "target": 99, "value": 1}, {"source": 21, "target": 122, "value": 1}, {"source": 21, "target": 86, "value": 1}, {"source": 22, "target": 117, "value": 1}, {"source": 22, "target": 89, "value": 1}, {"source": 22, "target": 86, "value": 1}, {"source": 22, "target": 72, "value": 2}, {"source": 22, "target": 96, "value": 1}, {"source": 22, "target": 125, "value": 4}, {"source": 22, "target": 73, "value": 1}, {"source": 23, "target": 117, "value": 6}, {"source": 23, "target": 73, "value": 15}, {"source": 23, "target": 72, "value": 1}, {"source": 23, "target": 86, "value": 6}, {"source": 23, "target": 89, "value": 13}, {"source": 23, "target": 113, "value": 1}, {"source": 23, "target": 133, "value": 9}, {"source": 23, "target": 125, "value": 30}, {"source": 23, "target": 93, "value": 1}, {"source": 23, "target": 123, "value": 8}, {"source": 23, "target": 111, "value": 8}, {"source": 23, "target": 106, "value": 2}, {"source": 23, "target": 96, "value": 18}, {"source": 23, "target": 76, "value": 3}, {"source": 23, "target": 132, "value": 16}, {"source": 23, "target": 130, "value": 3}, {"source": 23, "target": 109, "value": 15}, {"source": 23, "target": 102, "value": 2}, {"source": 23, "target": 90, "value": 1}, {"source": 23, "target": 92, "value": 3}, {"source": 23, "target": 119, "value": 17}, {"source": 24, "target": 92, "value": 5}, {"source": 24, "target": 111, "value": 1}, {"source": 24, "target": 102, "value": 6}, {"source": 24, "target": 73, "value": 1}, {"source": 24, "target": 90, "value": 13}, {"source": 24, "target": 99, "value": 1}, {"source": 24, "target": 109, "value": 6}, {"source": 24, "target": 119, "value": 2}, {"source": 25, "target": 92, "value": 2}, {"source": 25, "target": 90, "value": 1}, {"source": 25, "target": 102, "value": 10}, {"source": 25, "target": 73, "value": 8}, {"source": 25, "target": 111, "value": 1}, {"source": 25, "target": 119, "value": 2}, {"source": 25, "target": 132, "value": 1}, {"source": 26, "target": 73, "value": 16}, {"source": 26, "target": 92, "value": 9}, {"source": 26, "target": 102, "value": 1}, {"source": 26, "target": 99, "value": 18}, {"source": 26, "target": 95, "value": 1}, {"source": 26, "target": 98, "value": 12}, {"source": 27, "target": 98, "value": 4}, {"source": 27, "target": 73, "value": 12}, {"source": 28, "target": 73, "value": 10}, {"source": 28, "target": 98, "value": 6}, {"source": 28, "target": 118, "value": 8}, {"source": 29, "target": 118, "value": 4}, {"source": 29, "target": 72, "value": 10}, {"source": 30, "target": 72, "value": 5}, {"source": 30, "target": 96, "value": 2}, {"source": 30, "target": 86, "value": 1}, {"source": 30, "target": 100, "value": 4}, {"source": 30, "target": 89, "value": 1}, {"source": 31, "target": 89, "value": 1}, {"source": 31, "target": 100, "value": 8}, {"source": 31, "target": 93, "value": 6}, {"source": 31, "target": 114, "value": 2}, {"source": 31, "target": 133, "value": 1}, {"source": 31, "target": 111, "value": 1}, {"source": 32, "target": 100, "value": 4}, {"source": 32, "target": 72, "value": 2}, {"source": 32, "target": 117, "value": 2}, {"source": 32, "target": 89, "value": 1}, {"source": 32, "target": 105, "value": 2}, {"source": 32, "target": 114, "value": 7}, {"source": 33, "target": 86, "value": 2}, {"source": 33, "target": 116, "value": 2}, {"source": 33, "target": 85, "value": 11}, {"source": 33, "target": 128, "value": 1}, {"source": 33, "target": 87, "value": 2}, {"source": 33, "target": 102, "value": 1}, {"source": 33, "target": 119, "value": 1}, {"source": 34, "target": 109, "value": 3}, {"source": 34, "target": 119, "value": 2}, {"source": 34, "target": 87, "value": 5}, {"source": 35, "target": 87, "value": 1}, {"source": 35, "target": 119, "value": 2}, {"source": 35, "target": 102, "value": 5}, {"source": 35, "target": 109, "value": 9}, {"source": 35, "target": 133, "value": 1}, {"source": 35, "target": 99, "value": 42}, {"source": 35, "target": 85, "value": 4}, {"source": 35, "target": 79, "value": 1}, {"source": 35, "target": 128, "value": 11}, {"source": 35, "target": 103, "value": 1}, {"source": 35, "target": 75, "value": 10}, {"source": 35, "target": 89, "value": 6}, {"source": 35, "target": 105, "value": 1}, {"source": 35, "target": 86, "value": 6}, {"source": 35, "target": 117, "value": 3}, {"source": 35, "target": 125, "value": 2}, {"source": 35, "target": 72, "value": 1}, {"source": 36, "target": 79, "value": 1}, {"source": 36, "target": 105, "value": 1}, {"source": 36, "target": 117, "value": 1}, {"source": 36, "target": 89, "value": 1}, {"source": 36, "target": 75, "value": 1}, {"source": 36, "target": 72, "value": 7}, {"source": 36, "target": 113, "value": 1}, {"source": 36, "target": 86, "value": 2}, {"source": 37, "target": 105, "value": 3}, {"source": 37, "target": 89, "value": 1}, {"source": 37, "target": 72, "value": 3}, {"source": 37, "target": 85, "value": 1}, {"source": 37, "target": 113, "value": 3}, {"source": 37, "target": 117, "value": 8}, {"source": 37, "target": 86, "value": 28}, {"source": 37, "target": 79, "value": 2}, {"source": 37, "target": 75, "value": 3}, {"source": 37, "target": 125, "value": 1}, {"source": 38, "target": 105, "value": 3}, {"source": 38, "target": 79, "value": 2}, {"source": 38, "target": 103, "value": 4}, {"source": 38, "target": 90, "value": 5}, {"source": 38, "target": 109, "value": 3}, {"source": 38, "target": 94, "value": 2}, {"source": 38, "target": 104, "value": 2}, {"source": 38, "target": 119, "value": 1}, {"source": 39, "target": 94, "value": 1}, {"source": 39, "target": 119, "value": 12}, {"source": 39, "target": 109, "value": 7}, {"source": 39, "target": 104, "value": 3}, {"source": 39, "target": 90, "value": 3}, {"source": 40, "target": 90, "value": 5}, {"source": 40, "target": 104, "value": 3}, {"source": 40, "target": 94, "value": 7}, {"source": 40, "target": 119, "value": 1}, {"source": 40, "target": 109, "value": 3}, {"source": 41, "target": 94, "value": 3}, {"source": 41, "target": 90, "value": 22}, {"source": 41, "target": 104, "value": 2}, {"source": 41, "target": 119, "value": 20}, {"source": 41, "target": 109, "value": 10}, {"source": 41, "target": 115, "value": 2}, {"source": 41, "target": 99, "value": 13}, {"source": 41, "target": 133, "value": 1}, {"source": 42, "target": 119, "value": 1}, {"source": 42, "target": 99, "value": 1}, {"source": 42, "target": 115, "value": 4}, {"source": 42, "target": 96, "value": 1}, {"source": 42, "target": 93, "value": 9}, {"source": 42, "target": 133, "value": 1}, {"source": 43, "target": 119, "value": 5}, {"source": 43, "target": 93, "value": 46}, {"source": 43, "target": 123, "value": 37}, {"source": 43, "target": 111, "value": 23}, {"source": 43, "target": 132, "value": 3}, {"source": 43, "target": 84, "value": 19}, {"source": 43, "target": 82, "value": 23}, {"source": 44, "target": 93, "value": 8}, {"source": 44, "target": 123, "value": 2}, {"source": 44, "target": 128, "value": 8}, {"source": 44, "target": 79, "value": 1}, {"source": 44, "target": 103, "value": 1}, {"source": 44, "target": 105, "value": 1}, {"source": 44, "target": 121, "value": 3}, {"source": 45, "target": 97, "value": 1}, {"source": 45, "target": 121, "value": 6}, {"source": 45, "target": 81, "value": 2}, {"source": 46, "target": 97, "value": 35}, {"source": 46, "target": 81, "value": 1}, {"source": 46, "target": 121, "value": 35}, {"source": 46, "target": 109, "value": 8}, {"source": 46, "target": 133, "value": 1}, {"source": 46, "target": 90, "value": 1}, {"source": 46, "target": 114, "value": 12}, {"source": 46, "target": 102, "value": 2}, {"source": 46, "target": 130, "value": 3}, {"source": 47, "target": 130, "value": 1}, {"source": 47, "target": 102, "value": 1}, {"source": 47, "target": 99, "value": 2}, {"source": 47, "target": 119, "value": 1}, {"source": 47, "target": 96, "value": 7}, {"source": 47, "target": 73, "value": 9}, {"source": 47, "target": 72, "value": 3}, {"source": 47, "target": 109, "value": 3}, {"source": 47, "target": 92, "value": 4}, {"source": 47, "target": 133, "value": 2}, {"source": 48, "target": 120, "value": 2}, {"source": 48, "target": 100, "value": 8}, {"source": 48, "target": 122, "value": 1}, {"source": 48, "target": 106, "value": 1}, {"source": 48, "target": 96, "value": 1}, {"source": 48, "target": 128, "value": 72}, {"source": 48, "target": 72, "value": 2}, {"source": 48, "target": 114, "value": 6}, {"source": 48, "target": 109, "value": 7}, {"source": 48, "target": 90, "value": 3}, {"source": 49, "target": 109, "value": 1}, {"source": 49, "target": 90, "value": 11}, {"source": 50, "target": 109, "value": 4}, {"source": 50, "target": 133, "value": 10}, {"source": 50, "target": 106, "value": 1}, {"source": 50, "target": 72, "value": 4}, {"source": 50, "target": 74, "value": 18}, {"source": 50, "target": 117, "value": 2}, {"source": 50, "target": 116, "value": 1}, {"source": 50, "target": 90, "value": 6}, {"source": 50, "target": 75, "value": 3}, {"source": 50, "target": 80, "value": 10}, {"source": 50, "target": 85, "value": 8}, {"source": 50, "target": 126, "value": 13}, {"source": 50, "target": 79, "value": 2}, {"source": 50, "target": 89, "value": 1}, {"source": 50, "target": 105, "value": 4}, {"source": 50, "target": 113, "value": 3}, {"source": 50, "target": 86, "value": 1}, {"source": 50, "target": 115, "value": 16}, {"source": 50, "target": 119, "value": 17}, {"source": 51, "target": 119, "value": 1}, {"source": 51, "target": 96, "value": 39}, {"source": 51, "target": 115, "value": 10}, {"source": 51, "target": 103, "value": 1}, {"source": 51, "target": 89, "value": 1}, {"source": 51, "target": 79, "value": 1}, {"source": 51, "target": 85, "value": 14}, {"source": 51, "target": 74, "value": 4}, {"source": 51, "target": 122, "value": 1}, {"source": 51, "target": 109, "value": 1}, {"source": 51, "target": 132, "value": 10}, {"source": 51, "target": 73, "value": 7}, {"source": 51, "target": 117, "value": 1}, {"source": 51, "target": 128, "value": 4}, {"source": 52, "target": 74, "value": 28}, {"source": 52, "target": 122, "value": 1}, {"source": 52, "target": 117, "value": 2}, {"source": 53, "target": 74, "value": 10}, {"source": 53, "target": 109, "value": 6}, {"source": 53, "target": 89, "value": 8}, {"source": 53, "target": 117, "value": 8}, {"source": 53, "target": 72, "value": 1}, {"source": 53, "target": 85, "value": 17}, {"source": 53, "target": 116, "value": 11}, {"source": 53, "target": 133, "value": 3}, {"source": 53, "target": 122, "value": 5}, {"source": 53, "target": 125, "value": 3}, {"source": 53, "target": 128, "value": 2}, {"source": 53, "target": 132, "value": 3}, {"source": 54, "target": 122, "value": 1}, {"source": 54, "target": 128, "value": 1}, {"source": 54, "target": 72, "value": 1}, {"source": 54, "target": 116, "value": 3}, {"source": 54, "target": 125, "value": 1}, {"source": 54, "target": 127, "value": 1}, {"source": 54, "target": 107, "value": 1}, {"source": 54, "target": 73, "value": 4}, {"source": 55, "target": 107, "value": 4}, {"source": 55, "target": 73, "value": 4}, {"source": 55, "target": 127, "value": 6}, {"source": 56, "target": 127, "value": 1}, {"source": 56, "target": 107, "value": 7}, {"source": 56, "target": 73, "value": 7}, {"source": 57, "target": 73, "value": 6}, {"source": 57, "target": 127, "value": 2}, {"source": 57, "target": 107, "value": 2}, {"source": 57, "target": 115, "value": 1}, {"source": 57, "target": 96, "value": 11}, {"source": 58, "target": 119, "value": 1}, {"source": 58, "target": 115, "value": 4}, {"source": 58, "target": 133, "value": 8}, {"source": 58, "target": 96, "value": 12}, {"source": 58, "target": 99, "value": 4}, {"source": 58, "target": 114, "value": 10}, {"source": 58, "target": 102, "value": 1}, {"source": 58, "target": 90, "value": 7}, {"source": 58, "target": 89, "value": 5}, {"source": 58, "target": 128, "value": 2}, {"source": 58, "target": 116, "value": 3}, {"source": 58, "target": 85, "value": 2}, {"source": 59, "target": 116, "value": 1}, {"source": 59, "target": 89, "value": 4}, {"source": 59, "target": 117, "value": 3}, {"source": 59, "target": 86, "value": 6}, {"source": 59, "target": 128, "value": 4}, {"source": 59, "target": 90, "value": 3}, {"source": 59, "target": 72, "value": 1}, {"source": 59, "target": 119, "value": 1}, {"source": 59, "target": 75, "value": 16}, {"source": 59, "target": 96, "value": 5}, {"source": 59, "target": 113, "value": 3}, {"source": 59, "target": 125, "value": 1}, {"source": 59, "target": 114, "value": 1}, {"source": 60, "target": 75, "value": 1}, {"source": 60, "target": 73, "value": 1}, {"source": 60, "target": 90, "value": 8}, {"source": 60, "target": 79, "value": 1}, {"source": 60, "target": 103, "value": 10}, {"source": 61, "target": 103, "value": 18}, {"source": 61, "target": 79, "value": 14}, {"source": 62, "target": 79, "value": 8}, {"source": 62, "target": 103, "value": 4}, {"source": 62, "target": 132, "value": 22}, {"source": 62, "target": 90, "value": 2}, {"source": 62, "target": 125, "value": 2}, {"source": 62, "target": 75, "value": 1}, {"source": 62, "target": 73, "value": 7}, {"source": 62, "target": 86, "value": 4}, {"source": 62, "target": 99, "value": 1}, {"source": 63, "target": 86, "value": 4}, {"source": 63, "target": 90, "value": 7}, {"source": 63, "target": 89, "value": 2}, {"source": 63, "target": 115, "value": 12}, {"source": 63, "target": 96, "value": 4}, {"source": 63, "target": 109, "value": 1}, {"source": 63, "target": 113, "value": 3}, {"source": 63, "target": 73, "value": 14}, {"source": 63, "target": 125, "value": 1}, {"source": 63, "target": 133, "value": 1}, {"source": 63, "target": 117, "value": 2}, {"source": 63, "target": 105, "value": 2}, {"source": 64, "target": 73, "value": 11}, {"source": 64, "target": 75, "value": 1}, {"source": 64, "target": 125, "value": 1}, {"source": 64, "target": 90, "value": 1}, {"source": 65, "target": 73, "value": 11}, {"source": 65, "target": 90, "value": 2}, {"source": 65, "target": 125, "value": 1}, {"source": 65, "target": 75, "value": 1}, {"source": 65, "target": 109, "value": 5}, {"source": 66, "target": 75, "value": 14}, {"source": 66, "target": 82, "value": 1}, {"source": 66, "target": 109, "value": 2}, {"source": 66, "target": 85, "value": 1}, {"source": 66, "target": 128, "value": 2}, {"source": 66, "target": 117, "value": 1}, {"source": 66, "target": 103, "value": 1}, {"source": 66, "target": 89, "value": 1}, {"source": 66, "target": 122, "value": 1}, {"source": 66, "target": 120, "value": 1}, {"source": 66, "target": 90, "value": 1}, {"source": 66, "target": 79, "value": 1}, {"source": 66, "target": 91, "value": 3}, {"source": 67, "target": 96, "value": 6}, {"source": 67, "target": 119, "value": 4}, {"source": 67, "target": 91, "value": 1}, {"source": 67, "target": 115, "value": 6}, {"source": 67, "target": 133, "value": 2}, {"source": 67, "target": 99, "value": 1}, {"source": 68, "target": 115, "value": 1}, {"source": 68, "target": 96, "value": 6}, {"source": 68, "target": 91, "value": 2}, {"source": 68, "target": 119, "value": 14}, {"source": 68, "target": 90, "value": 1}, {"source": 69, "target": 115, "value": 1}, {"source": 69, "target": 91, "value": 12}, {"source": 69, "target": 96, "value": 8}, {"source": 69, "target": 114, "value": 1}, {"source": 69, "target": 133, "value": 36}, {"source": 69, "target": 90, "value": 1}, {"source": 69, "target": 119, "value": 2}, {"source": 70, "target": 115, "value": 5}, {"source": 70, "target": 90, "value": 31}, {"source": 70, "target": 96, "value": 1}, {"source": 70, "target": 92, "value": 1}, {"source": 70, "target": 114, "value": 3}, {"source": 70, "target": 120, "value": 12}, {"source": 70, "target": 88, "value": 10}, {"source": 70, "target": 131, "value": 1}, {"source": 70, "target": 117, "value": 26}, {"source": 70, "target": 85, "value": 2}, {"source": 70, "target": 128, "value": 4}, {"source": 70, "target": 122, "value": 25}, {"source": 71, "target": 120, "value": 1}, {"source": 71, "target": 88, "value": 1}, {"source": 71, "target": 131, "value": 8}, {"source": 71, "target": 114, "value": 25}, {"source": 71, "target": 85, "value": 10}, {"source": 71, "target": 122, "value": 14}, {"source": 71, "target": 129, "value": 1}, {"source": 71, "target": 101, "value": 1}, {"source": 71, "target": 96, "value": 8}, {"source": 71, "target": 106, "value": 17}, {"source": 71, "target": 133, "value": 38}, {"source": 71, "target": 73, "value": 1}, {"source": 71, "target": 111, "value": 3}]};
  // List of node names
  const allNodes = data.nodes.map((d) => d.name);

  // List of groups
  let allGroups = data.nodes.map((d) => d.order);
  allGroups = [...new Set(allGroups)];

  // A color scale for groups:
  const color = d3.scaleOrdinal().domain(allGroups).range(d3.schemeSet3);

  // A linear scale for node size
  const size = d3.scaleLinear().domain([1, 10]).range([0.5, 8]);

  // A linear scale to position the nodes on the X axis
  const x = d3.scalePoint().range([0, width]).domain(allNodes);

  // In my input data, links are provided between nodes -id-, NOT between node names.
  // So I have to do a link between this id and the name
  const idToNode = {};
  data.nodes.forEach(function (n) {
    idToNode[n.group] = n;
  });

  // Add the links
  const links = svg
    .selectAll("mylinks")
    .data(data.links)
    .join("path")
    .attr("d", (d) => {
      start = x(idToNode[d.source].name); // X position of start node on the X axis
      end = x(idToNode[d.target].name); // X position of end node
      return [
        "M",
        start,
        height - 30, // the arc starts at the coordinate x=start, y=height-30 (where the starting node is)
        "A", // This means we're gonna build an elliptical arc
        (start - end) / 2,
        ",", // Next 2 lines are the coordinates of the inflexion point. Height of this point is proportional with start - end distance
        (start - end) / 2,
        0,
        0,
        ",",
        start < end ? 1 : 0,
        end,
        ",",
        height - 30,
      ] // We always want the arc on top. So if end is before start, putting 0 here turn the arc upside down.
        .join(" ");
    })
    .style("fill", "none")
    .attr("stroke", "grey")
    .style("stroke-width", (d) => { return d.value/2.5});

  // Add the circle for the nodes
  const nodes = svg
    .selectAll("mynodes")
    .data(
      data.nodes.sort((a, b) => {
        +b.n - +a.n;
      })
    )
    .join("circle")
    .attr("cx", (d) => x(d.name))
    .attr("cy", height - 30)
    .attr("r", (d) => 8)
    .style("fill", (d) => color(d.group))
    .attr("stroke", "white");

  // And give them a label
  const labels = svg
    .selectAll("mylabels")
    .data(data.nodes)
    .join("text")
    .attr("x", 0)
    .attr("y", 0)
    .text((d) => d.name)
    .style("text-anchor", "end")
    .attr(
      "transform",
      (d) => "translate(" + (x(d.name)) + "," + (height-15) + ")rotate(-90)"
    )
    .style("font-size", 10);
  // Add the highlighting functionality
  nodes
    .on("mouseover", function (event, d) {
      // Highlight the nodes: every node is green except of him
      nodes.style("opacity", 0.2);
      d3.select(this).style("opacity", 1);
      // Highlight the connections
      links
        .style("stroke", (a) =>
          a.source === d.group || a.target === d.group ? color(d.order) : "#b8b8b8"
        )
        .style("stroke-opacity", (a) =>
          a.source === d.group || a.target === d.group ? 1 : 0.2
        )
        .style("stroke-width", (a) =>
          a.source === d.group || a.target === d.group ? (d) => { return d.value/2.5} : 1
        );
      labels.style("font-size", (b) => (b.name === d.name ? 11 : 8));
    })
    .on("mouseout", (d) => {
      nodes.style("opacity", 1);
      links
        .style("stroke", "grey")
        .style("stroke-opacity", 0.8)
        .style("stroke-width", (d) => { return d.value/2.5});
      labels.style("font-size", 10);
    });
//});
 </script>
